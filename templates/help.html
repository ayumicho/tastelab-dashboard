{% extends "base.html" %}

{% block title %}Help & Support{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/help.css') }}">
{% endblock %}

{% block content %}
<div class="container-fluid pt-4">
    <div class="header">
        <div>
            <h1 class="header-title">Help & Support</h1>
            <p class="header-subtitle">Everything you need to know about using the Taste Lab Dashboard</p>
        </div>
    </div>
    <div class="main-card">
        <!-- Quick Links -->
        <div class="quick-links">
            <a href="#getting-started" class="quick-link-card">
                <div class="quick-link-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                </div>
                <div class="quick-link-title">Getting Started</div>
                <div class="quick-link-desc">Learn the basics and set up your first experiment</div>
            </a>

            <a href="#navigation" class="quick-link-card">
                <div class="quick-link-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>
                    </svg>
                </div>
                <div class="quick-link-title">Navigation Guide</div>
                <div class="quick-link-desc">Understand the dashboard layout and features</div>
            </a>

            <a href="#features" class="quick-link-card">
                <div class="quick-link-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="9" y1="9" x2="15" y2="9"></line>
                        <line x1="9" y1="15" x2="15" y2="15"></line>
                    </svg>
                </div>
                <div class="quick-link-title">Key Features</div>
                <div class="quick-link-desc">Explore all dashboard capabilities</div>
            </a>

            <a href="#troubleshooting" class="quick-link-card">
                <div class="quick-link-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                </div>
                <div class="quick-link-title">Troubleshooting</div>
                <div class="quick-link-desc">Solutions to common issues</div>
            </a>
        </div>

        <!-- Getting Started -->
        <div class="content-card" id="getting-started">
            <div class="card-header">
                <h2 class="card-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    Getting Started
                </h2>
            </div>

            <div class="accordion help-accordion" id="gettingStartedAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#step1">
                            Step 1: Understanding Your Dashboard
                        </button>
                    </h2>
                    <div id="step1" class="accordion-collapse collapse show" data-bs-parent="#gettingStartedAccordion">
                        <div class="accordion-body">
                            <p>The Taste Lab Dashboard serves as the central platform for managing sensory testing experiments. Here's what to know:</p>
                            <ul>
                                <li><strong>Dashboard:</strong> View the newest experiment data and quick statistics</li>
                                <li><strong>Previous Experiments:</strong> Browse historical experiment data</li>
                                <li><strong>Transcription:</strong> Upload and analyze experiment video recordings</li>
                                <li><strong>Cameras:</strong> Monitor object detection and people tracking</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step2">
                            Step 2: Viewing Experiment Data
                        </button>
                    </h2>
                    <div id="step2" class="accordion-collapse collapse" data-bs-parent="#gettingStartedAccordion">
                        <div class="accordion-body">
                            <p>To view data from a specific experiment:</p>
                            <ol>
                                <li>Navigate to the <strong>Dashboard</strong> or <strong>Previous Experiments</strong> page</li>
                                <li>Use the <strong>experiment selector dropdown</strong> to choose an experiment</li>
                                <li>The page will automatically load data including:
                                    <ul>
                                        <li>Participant statistics</li>
                                        <li>Speech analysis and product mentions</li>
                                        <li>Survey completion data</li>
                                        <li>Time-based engagement metrics</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step3">
                            Step 3: Uploading Video for Transcription
                        </button>
                    </h2>
                    <div id="step3" class="accordion-collapse collapse" data-bs-parent="#gettingStartedAccordion">
                        <div class="accordion-body">
                            <p>To analyze experiment recordings:</p>
                            <ol>
                                <li>Go to the <strong>Transcription</strong> page</li>
                                <li>Click <strong>"Select Video File"</strong> or drag and drop an MP4 file</li>
                                <li>Click <strong>"Process Video"</strong> to start analysis</li>
                                <li>Wait for processing to complete (this may take several minutes)</li>
                                <li>Review the results:
                                    <ul>
                                        <li>Video summary and key insights</li>
                                        <li>Most mentioned topics and products</li>
                                        <li>Full timestamped transcript</li>
                                        <li>Keyword extraction</li>
                                    </ul>
                                </li>
                            </ol>
                            <p><strong>Supported format:</strong> MP4 files up to 500MB</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Guide -->
        <div class="content-card" id="navigation">
            <div class="card-header">
                <h2 class="card-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>
                    </svg>
                    Navigation Guide
                </h2>
            </div>

            <div class="feature-list">
                <div class="feature-item">
                    <h4>Sidebar Navigation</h4>
                    <p>Access all main pages from the left sidebar. The active page is highlighted in purple. Click any menu item to navigate instantly.</p>
                </div>

                <div class="feature-item">
                    <h4>Search Bar</h4>
                    <p>Use the search bar in the top navigation to quickly find experiments, participants, or specific data.</p>
                </div>

                <div class="feature-item">
                    <h4>Experiment Selector</h4>
                    <p>Most pages include an experiment selector dropdown at the top. Use this to switch between different experiments without changing pages.</p>
                </div>

                <div class="feature-item">
                    <h4>Export Functions</h4>
                    <p>Look for "Export Data" or "Download" buttons on various pages to save your data in CSV or PDF format for external analysis.</p>
                </div>

                <div class="feature-item">
                    <h4>Breadcrumb Trail</h4>
                    <p>Page titles and subtitles help you understand where you are in the dashboard. The gradient title indicates the current page.</p>
                </div>

                <div class="feature-item">
                    <h4>Responsive Design</h4>
                    <p>The dashboard works on desktop, tablet, and mobile devices. The sidebar collapses on smaller screens for easy access.</p>
                </div>
            </div>
        </div>

        <!-- Key Features -->
        <div class="content-card" id="features">
            <div class="card-header">
                <h2 class="card-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="9" y1="9" x2="15" y2="9"></line>
                        <line x1="9" y1="15" x2="15" y2="15"></line>
                    </svg>
                    Key Features
                </h2>
            </div>

            <div class="accordion help-accordion" id="featuresAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#feature1">
                            Experiment Dashboard
                        </button>
                    </h2>
                    <div id="feature1" class="accordion-collapse collapse show" data-bs-parent="#featuresAccordion">
                        <div class="accordion-body">
                            <p>The main dashboard provides real-time insights into your current experiment:</p>
                            <ul>
                                <li><strong>Participant Overview:</strong> Track total participants, return visitors, and completion rates</li>
                                <li><strong>Speech Analysis:</strong> View product mentions and keyword analysis from participant conversations</li>
                                <li><strong>Visual Charts:</strong> Interactive graphs showing trends and comparisons</li>
                                <li><strong>Quick Actions:</strong> Export data or compare experiments directly from the dashboard</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#feature2">
                            Video Transcription & Analysis
                        </button>
                    </h2>
                    <div id="feature2" class="accordion-collapse collapse" data-bs-parent="#featuresAccordion">
                        <div class="accordion-body">
                            <p>Automatically process experiment recordings to extract valuable insights:</p>
                            <ul>
                                <li><strong>Automatic Transcription:</strong> Convert speech to timestamped text</li>
                                <li><strong>Topic Extraction:</strong> Identify most discussed topics and products</li>
                                <li><strong>Keyword Analysis:</strong> Extract common terms and phrases</li>
                                <li><strong>Summary Generation:</strong> Get AI-generated experiment summaries</li>
                                <li><strong>Export Options:</strong> Download transcripts and summaries for reports</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#feature3">
                            Object Detection & Tracking
                        </button>
                    </h2>
                    <div id="feature3" class="accordion-collapse collapse" data-bs-parent="#featuresAccordion">
                        <div class="accordion-body">
                            <p>Monitor participant movement and lab utilization:</p>
                            <ul>
                                <li><strong>6-Camera Grid View:</strong> See all camera feeds simultaneously</li>
                                <li><strong>Person Detection:</strong> Track people count and movement patterns</li>
                                <li><strong>Heatmaps:</strong> Visualize high-traffic areas in the lab</li>
                                <li><strong>Floor Plan View:</strong> See aggregated positions across all cameras</li>
                                <li><strong>Detection Log:</strong> Review detailed detection history with confidence scores</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#feature4">
                            Previous Experiments Browser
                        </button>
                    </h2>
                    <div id="feature4" class="accordion-collapse collapse" data-bs-parent="#featuresAccordion">
                        <div class="accordion-body">
                            <p>Access and compare historical experiment data:</p>
                            <ul>
                                <li><strong>Filter by Category:</strong> Sort experiments by type (taste testing, texture analysis, etc.)</li>
                                <li><strong>Status Tracking:</strong> See which experiments are completed, analyzing, or archived</li>
                                <li><strong>Quick Stats:</strong> View key metrics for each experiment at a glance</li>
                                <li><strong>Detailed Views:</strong> Click any experiment to see full results and analysis</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Troubleshooting -->
        <div class="content-card" id="troubleshooting">
            <div class="card-header">
                <h2 class="card-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    Troubleshooting
                </h2>
            </div>

            <div class="accordion help-accordion" id="troubleshootingAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#issue1">
                            Video Upload Fails or Hangs
                        </button>
                    </h2>
                    <div id="issue1" class="accordion-collapse collapse show" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p><strong>Possible causes and solutions:</strong></p>
                            <ul>
                                <li><strong>File too large:</strong> Ensure your video is under 500MB. Compress the video if needed.</li>
                                <li><strong>Wrong format:</strong> Only MP4 files are supported. Convert other formats before uploading.</li>
                                <li><strong>Slow internet:</strong> Check your connection speed. Large files may take several minutes to upload.</li>
                                <li><strong>Browser cache:</strong> Clear your browser cache and try again.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#issue2">
                            Data Not Loading or Displaying
                        </button>
                    </h2>
                    <div id="issue2" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p><strong>Try these solutions:</strong></p>
                            <ul>
                                <li>Refresh the page using <span class="keyboard-shortcut">F5</span> or <span class="keyboard-shortcut">âŒ˜R</span></li>
                                <li>Check that the correct experiment is selected in the dropdown</li>
                                <li>Verify your internet connection is stable</li>
                                <li>Try logging out and logging back in</li>
                                <li>Contact support if the issue persists</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#issue3">
                            Charts Not Rendering Correctly
                        </button>
                    </h2>
                    <div id="issue3" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p><strong>Common fixes:</strong></p>
                            <ul>
                                <li>Ensure JavaScript is enabled in your browser</li>
                                <li>Try using a different browser (Chrome, Firefox, Safari recommended)</li>
                                <li>Update your browser to the latest version</li>
                                <li>Disable browser extensions that might interfere with scripts</li>
                                <li>Clear browser cache and reload the page</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#issue4">
                            Export Function Not Working
                        </button>
                    </h2>
                    <div id="issue4" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p><strong>Solutions:</strong></p>
                            <ul>
                                <li>Check that pop-ups are not blocked by your browser</li>
                                <li>Ensure you have sufficient storage space on your device</li>
                                <li>Try downloading to a different location</li>
                                <li>Verify you have permission to download files in your network</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#issue5">
                            Camera Feed Not Showing
                        </button>
                    </h2>
                    <div id="issue5" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p><strong>Troubleshooting steps:</strong></p>
                            <ul>
                                <li>Ensure the selected experiment has camera data available</li>
                                <li>Check that object detection processing has been completed</li>
                                <li>Verify camera permissions are enabled</li>
                                <li>Refresh the page and try again</li>
                                <li>Contact technical support if cameras are offline</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br/><br/><br/>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Smooth scroll to sections
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
</script>
{% endblock %}
